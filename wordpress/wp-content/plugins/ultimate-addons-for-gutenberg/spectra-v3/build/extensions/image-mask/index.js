(()=>{"use strict";var e={790:e=>{e.exports=window.ReactJSXRuntime},9560:(e,a,t)=>{t.d(a,{A:()=>p});const s=window.wp.i18n,o=window.wp.blockEditor,n=window.wp.components;var l=t(790);const r=window?.spectraExtensions?.pluginUrl||"",i=r?{circle:`${r}assets/masks/circle.svg`,diamond:`${r}assets/masks/diamond.svg`,hexagon:`${r}assets/masks/hexagon.svg`,rounded:`${r}assets/masks/rounded.svg`,blob1:`${r}assets/masks/blob1.svg`,blob2:`${r}assets/masks/blob2.svg`,blob3:`${r}assets/masks/blob3.svg`,blob4:`${r}assets/masks/blob4.svg`}:null,u={circle:'<circle cx="240" cy="190" r="184" fill="#000"/>',diamond:'<rect x="106.001" y="56.001" transform="matrix(-0.7071 -0.7071 0.7071 -0.7071 275.3553 494.0559)" width="267.998" height="267.999" fill="#000"/>',hexagon:'<polygon points="79.386,97.269 240,4.538 400.614,97.269 400.614,282.73 240,375.462 79.386,282.73" fill="#000"/>',rounded:'<path d="M421,309.436C421,343.437,393.437,371,359.436,371H120.564C86.563,371,59,343.437,59,309.436V70.564C59,36.563,86.563,9,120.564,9h238.871C393.437,9,421,36.563,421,70.564V309.436z" fill="#000"/>',blob1:'<path d="M47.846,184.442c-87.942,134.709,80.073,196.702,186.331,196.702c104.494,0,222.582-39.417,222.582-160.557C456.758-91.25,198.783-46.776,47.846,184.442z" fill="#000"/>',blob2:'<path d="M393.879,31.896c96.935,41.811,41.553,265.103-29.118,320.414c-74.443,58.259-320.428,32.36-330.586-185.032C29.551,68.561,183.588-58.822,393.879,31.896z" fill="#000"/>',blob3:'<path d="M141.699,9.958c37.611-41.211,253.977,90.988,263.995,181.115c10.016,90.134-215.692,232.896-280.453,172.106C69.045,310.428,39.531,121.932,141.699,9.958z" fill="#000"/>',blob4:'<path d="M69.19,26.334C54.496,39.876,42.91,57.185,35.302,75.221c-10.718,25.408-15.268,52.962-18.384,80.363c-10.069,88.57,17.375,190.72,112.557,217.96c63.844,18.273,133.074-0.437,191.492-27.517c85.828-39.789,206.786-163.646,105.685-255.719C372.3,40.81,284.499,59.485,220.248,32.528c-30.103-12.63-58.445-35.896-92.778-33.125C105.078,1.21,85.272,11.517,69.19,26.334z" fill="#000"/>'},p=e=>{if(!r)return null;const{attributes:a,setAttributes:t,clientId:p}=e,{spectraMask:d}=a,c=[{label:(0,s.__)("None","ultimate-addons-for-gutenberg"),value:"none"},{label:(0,s.__)("Circle","ultimate-addons-for-gutenberg"),value:"circle"},{label:(0,s.__)("Diamond","ultimate-addons-for-gutenberg"),value:"diamond"},{label:(0,s.__)("Hexagon","ultimate-addons-for-gutenberg"),value:"hexagon"},{label:(0,s.__)("Rounded","ultimate-addons-for-gutenberg"),value:"rounded"},{label:(0,s.__)("Blob 1","ultimate-addons-for-gutenberg"),value:"blob1"},{label:(0,s.__)("Blob 2","ultimate-addons-for-gutenberg"),value:"blob2"},{label:(0,s.__)("Blob 3","ultimate-addons-for-gutenberg"),value:"blob3"},{label:(0,s.__)("Blob 4","ultimate-addons-for-gutenberg"),value:"blob4"},{label:(0,s.__)("Custom","ultimate-addons-for-gutenberg"),value:"custom"}],g=[{label:(0,s.__)("Auto","ultimate-addons-for-gutenberg"),value:"auto"},{label:(0,s.__)("Cover","ultimate-addons-for-gutenberg"),value:"cover"},{label:(0,s.__)("Contain","ultimate-addons-for-gutenberg"),value:"contain"}],m=[{label:(0,s.__)("No Repeat","ultimate-addons-for-gutenberg"),value:"no-repeat"},{label:(0,s.__)("Repeat","ultimate-addons-for-gutenberg"),value:"repeat"},{label:(0,s.__)("Repeat X","ultimate-addons-for-gutenberg"),value:"repeat-x"},{label:(0,s.__)("Repeat Y","ultimate-addons-for-gutenberg"),value:"repeat-y"}],b=e=>{const a={...d,shape:e};var s;"custom"!==e&&"none"!==e?a.image={id:e,url:(s=e,i[s]||"")}:"none"===e&&(a.image=null),t({spectraMask:a})},h=e=>{const a=`\n                       <svg width="480" height="380" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 380">\n                               ${u[e]||u.circle}\n                       </svg>\n               `.replace(/\s+/g," ").trim();return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(a)}`},_=e=>{t({spectraMask:{...d,position:e}})},x=d.shape&&"none"!==d.shape;return(0,l.jsx)(o.InspectorControls,{group:"settings",children:(0,l.jsxs)(n.__experimentalToolsPanel,{label:(0,s.__)("Image Mask from Spectra","ultimate-addons-for-gutenberg"),resetAll:()=>{t({spectraMask:{shape:"none",image:null,size:"auto",position:{x:.5,y:.5},repeat:"no-repeat"}})},panelId:p,children:[(0,l.jsxs)(n.__experimentalToolsPanelItem,{hasValue:()=>!!d.shape&&"none"!==d.shape,label:(0,s.__)("Shape","ultimate-addons-for-gutenberg"),onDeselect:()=>b("none"),resetAllFilter:()=>({spectraMask:{...d,shape:"none"}}),isShownByDefault:!0,panelId:p,children:[(0,l.jsx)(n.SelectControl,{__next40pxDefaultSize:!0,label:(0,s.__)("Shape","ultimate-addons-for-gutenberg"),value:d.shape,options:c,onChange:e=>{"custom"===e?t({spectraMask:{...d,image:null,shape:e}}):b(e)},help:(0,s.__)("Choose a predefined shape, or upload a transparent PNG or SVG as a mask.","ultimate-addons-for-gutenberg")}),"custom"===d.shape&&(0,l.jsx)(o.MediaUpload,{onSelect:e=>{t({spectraMask:{...d,image:{id:e.id,url:e.url}}})},allowedTypes:["image"],value:d.image?.id,render:({open:e})=>(0,l.jsx)(l.Fragment,{children:d.image?.url?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{src:d.image.url,alt:d.image.alt}),(0,l.jsxs)(n.__experimentalHStack,{alignment:"edge",children:[(0,l.jsx)(n.Button,{onClick:e,variant:"secondary",children:(0,s.__)("Replace","ultimate-addons-for-gutenberg")}),(0,l.jsx)(n.Button,{onClick:()=>t({spectraMask:{...d,image:null}}),variant:"link",isDestructive:!0,children:(0,s.__)("Remove","ultimate-addons-for-gutenberg")})]})]}):(0,l.jsx)(n.Button,{onClick:e,variant:"secondary",children:(0,s.__)("Select Mask Image","ultimate-addons-for-gutenberg")})})})]}),x&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.__experimentalToolsPanelItem,{hasValue:()=>!!d.size&&"auto"!==d.size,label:(0,s.__)("Size","ultimate-addons-for-gutenberg"),onDeselect:()=>t({spectraMask:{...d,size:"auto"}}),resetAllFilter:()=>({spectraMask:{...d,size:"auto"}}),isShownByDefault:!0,panelId:p,children:(0,l.jsx)(n.SelectControl,{__next40pxDefaultSize:!0,label:(0,s.__)("Size","ultimate-addons-for-gutenberg"),value:d.size,options:g,onChange:e=>t({spectraMask:{...d,size:e}}),help:(0,s.__)("Control how the mask fills the container.","ultimate-addons-for-gutenberg")})}),(0,l.jsx)(n.__experimentalToolsPanelItem,{hasValue:()=>!!d.position&&(.5!==d.position.x||.5!==d.position.y),label:(0,s.__)("Position","ultimate-addons-for-gutenberg"),onDeselect:()=>t({spectraMask:{...d,position:{x:.5,y:.5}}}),resetAllFilter:()=>({spectraMask:{...d,position:{x:.5,y:.5}}}),isShownByDefault:!0,panelId:p,children:d.shape&&"none"!==d.shape&&("custom"===d.shape&&d.image||"custom"!==d.shape)&&(0,l.jsx)(n.FocalPointPicker,{__nextHasNoMarginBottom:!0,help:(0,s.__)("Set the position of the mask within the container.","ultimate-addons-for-gutenberg"),url:"custom"===d.shape?d.image?.url||h("circle"):d.shape&&"none"!==d.shape?h(d.shape):h("circle"),value:d.position||{x:.5,y:.5},onDragStart:_,onDrag:_,onChange:_})}),(0,l.jsx)(n.__experimentalToolsPanelItem,{hasValue:()=>!!d.repeat&&"no-repeat"!==d.repeat,label:(0,s.__)("Repeat","ultimate-addons-for-gutenberg"),onDeselect:()=>t({spectraMask:{...d,repeat:"no-repeat"}}),resetAllFilter:()=>({spectraMask:{...d,repeat:"no-repeat"}}),isShownByDefault:!0,panelId:p,children:(0,l.jsx)(n.SelectControl,{__next40pxDefaultSize:!0,label:(0,s.__)("Repeat","ultimate-addons-for-gutenberg"),value:d.repeat,options:m,onChange:e=>t({spectraMask:{...d,repeat:e}}),help:(0,s.__)("Choose how the mask should repeat.","ultimate-addons-for-gutenberg"),__nextHasNoMarginBottom:!0})})]})]})})}}},a={};function t(s){var o=a[s];if(void 0!==o)return o.exports;var n=a[s]={exports:{}};return e[s](n,n.exports,t),n.exports}t.d=(e,a)=>{for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a);const s=window.wp.hooks,o=window.wp.compose;var n=t(9560);window.wp.element;const l=e=>e.filter(Boolean).join(" ");var r=t(790);const i=(e=>{if(!e)return"";try{return new URL(e).pathname}catch(a){return e}})(window?.spectraExtensions?.pluginUrl||""),u=(0,o.createHigherOrderComponent)((e=>a=>{const{name:t,isSelected:s}=a;return"core/image"!==t?(0,r.jsx)(e,{...a}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e,{...a}),s&&(0,r.jsx)(n.A,{...a})]})}),"withImageMask");(0,s.addFilter)("blocks.registerBlockType","spectra/image-mask/attributes",(e=>{if("core/image"!==e.name)return e;const a=e.getEditWrapperProps;return{...e,attributes:{...e.attributes,spectraMask:{type:"object",default:{shape:"none",image:null,size:"auto",position:{x:.5,y:.5},repeat:"no-repeat"}}},getEditWrapperProps:e=>{const t=a?a(e):{},{spectraMask:s}=e;if(!s?.shape||"none"===s.shape)return t;let o="";s.shape&&"none"!==s.shape&&"custom"!==s.shape&&i?o=`url( ${i}assets/masks/${s.shape}.svg )`:"custom"===s.shape&&s.image?.url&&(o=`url( ${s.image.url} )`);const n=s.position||{x:.5,y:.5},r=`${100*n.x}% ${100*n.y}%`;return{...t,className:l([t.className,"spectra-mask"]),style:{...t.style||{},"--spectra-mask-image":o,"--spectra-mask-size":s.size||"contain","--spectra-mask-position":r,"--spectra-mask-repeat":s.repeat||"no-repeat"}}}}})),(0,s.addFilter)("editor.BlockEdit","spectra/image-mask/edit",u),(0,s.addFilter)("blocks.getSaveContent.extraProps","spectra/image-mask/add-mask-class",((e,a,t)=>{if("core/image"!==a.name)return e;const{spectraMask:s}=t;return s?.shape&&"none"!==s.shape?{...e,className:l([e.className,"spectra-mask"])}:e}))})();