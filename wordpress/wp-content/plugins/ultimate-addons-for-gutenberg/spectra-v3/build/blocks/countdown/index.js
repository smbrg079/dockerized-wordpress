(()=>{"use strict";var e,t={4890:()=>{const e=window.wp.blocks,t=window.wp.element,o=e=>({width:24,height:24,fill:"none",className:e&&"spectra-block-icon--colored"}),a={fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},n=(e=!0)=>(0,t.createElement)("svg",{viewBox:"0 0 24 24",...o(e)},(0,t.createElement)("path",{d:"M10 2H14M12 14L15 11M20 14C20 18.4183 16.4183 22 12 22C7.58172 22 4 18.4183 4 14C4 9.58172 7.58172 6 12 6C16.4183 6 20 9.58172 20 14Z",...a})),l=window.wp.blockEditor,s=window.wp.components,r=window.wp.date,i=window.wp.hooks,u=window.wp.i18n,d=864e5,c=36e5,g=e=>e&&e instanceof Date?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`:"",b=(e,t,o,a)=>({...e&&{days:0},...t&&{hours:0},...o&&{minutes:0},...a&&{seconds:0},isExpired:!0}),h=(e,t=!0,o=!0,a=!0,n=!0)=>{const l=new Date(e);if(isNaN(l.getTime()))return b(t,o,a,n);const s=Date.now(),r=l.getTime()-s;return r<=0?b(t,o,a,n):((e,t,o,a,n)=>{const l={};let s=e;return t&&(l.days=Math.floor(s/d),s%=d),o&&(l.hours=Math.floor(s/c),s%=c),a&&(l.minutes=Math.floor(s/6e4),s%=6e4),n&&(l.seconds=Math.floor(s/1e3)),{...l,isExpired:!1}})(r,t,o,a,n)},_=window.ReactJSXRuntime,m=e=>{var t;const{settings:o}=e,a=(0,l.__experimentalUseMultipleOriginColorsAndGradients)(),n=null!==(t=o?.map((e=>({...e,enableAlpha:!0,clearable:!0}))))&&void 0!==t?t:[];return(0,_.jsx)(l.InspectorControls,{group:"color",children:(0,_.jsx)(l.__experimentalColorGradientSettingsDropdown,{__experimentalIsRenderedInSidebar:!0,disableCustomColors:!1,disableCustomGradients:!1,...a,...e,settings:n})})},p=(0,t.memo)((e=>{const{clientId:o,setAttributes:a,attributes:n}=e,{timerType:d,endDateTime:c,displayEndDateTime:b,showDays:h,showHours:m,showMinutes:p,showSeconds:f,ariaLiveType:x="off",overflow:v="visible"}=n,w=(0,t.useMemo)((()=>(0,i.applyFilters)("spectra.countdown.timer-settings",null,e)),[e.clientId,e.attributes.timerType]),y=(0,t.useMemo)((()=>(0,i.applyFilters)("spectra.countdown.reset-all-attributes",{})),[]),S=(0,t.useCallback)((e=>{const{showDays:t,showHours:o,showMinutes:a,showSeconds:l}={...n,...e};return t||o||a||l?e:{...e,showDays:!0}}),[n]),C=(0,t.useMemo)((()=>(0,r.getSettings)().timezone),[]),D=(0,t.useCallback)((e=>{if(!e)return;const t="string"==typeof e?e:g(e),o=new Date(e+"Z");o.setMilliseconds(o.getMilliseconds()-60*C.offset*60*1e3),a({endDateTime:o.toISOString(),displayEndDateTime:t})}),[a,C]);return(0,_.jsx)(l.InspectorControls,{group:"settings",children:(0,_.jsxs)(s.__experimentalToolsPanel,{label:(0,u.__)("General","ultimate-addons-for-gutenberg"),resetAll:()=>{a({timerType:"date",endDateTime:void 0,displayEndDateTime:void 0,showDays:!0,showHours:!0,showMinutes:!0,showSeconds:!0,ariaLiveType:"off",...y,overflow:"visible"})},panelId:o,children:[w,"date"===d&&(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!!c,label:(0,u.__)("Timer End Date & Time","ultimate-addons-for-gutenberg"),onDeselect:()=>a({endDateTime:void 0}),isShownByDefault:!0,panelId:o,children:(0,_.jsx)(s.BaseControl,{__nextHasNoMarginBottom:!0,id:"wp-block-spectra-countdown-end-date-time",label:(0,u.__)("End Date & Time","ultimate-addons-for-gutenberg"),help:(0,u.__)("Select a future date and time for the countdown.","ultimate-addons-for-gutenberg"),children:(0,_.jsx)(s.DateTimePicker,{currentDate:new Date(b),onChange:D,is12Hour:!0,__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0})})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!h,label:(0,u.__)("Show Days","ultimate-addons-for-gutenberg"),onDeselect:()=>a(S({showDays:!0})),isShownByDefault:!0,panelId:o,children:(0,_.jsx)(s.ToggleControl,{label:(0,u.__)("Show Days","ultimate-addons-for-gutenberg"),checked:h,onChange:e=>a(S({showDays:e}))})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!m,label:(0,u.__)("Show Hours","ultimate-addons-for-gutenberg"),onDeselect:()=>a(S({showHours:!0})),isShownByDefault:!0,panelId:o,children:(0,_.jsx)(s.ToggleControl,{label:(0,u.__)("Show Hours","ultimate-addons-for-gutenberg"),checked:m,onChange:e=>a(S({showHours:e}))})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!p,label:(0,u.__)("Show Minutes","ultimate-addons-for-gutenberg"),onDeselect:()=>a(S({showMinutes:!0})),isShownByDefault:!0,panelId:o,children:(0,_.jsx)(s.ToggleControl,{label:(0,u.__)("Show Minutes","ultimate-addons-for-gutenberg"),checked:p,onChange:e=>a(S({showMinutes:e}))})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!f,label:(0,u.__)("Show Seconds","ultimate-addons-for-gutenberg"),onDeselect:()=>a(S({showSeconds:!0})),isShownByDefault:!0,panelId:o,children:(0,_.jsx)(s.ToggleControl,{label:(0,u.__)("Show Seconds","ultimate-addons-for-gutenberg"),checked:f,onChange:e=>a(S({showSeconds:e}))})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>"off"!==x,label:(0,u.__)("ARIA Live Type","ultimate-addons-for-gutenberg"),onDeselect:()=>a({ariaLiveType:"off"}),isShownByDefault:!0,panelId:o,children:(0,_.jsxs)(s.__experimentalToggleGroupControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,isBlock:!0,label:(0,u.__)("ARIA Live Type","ultimate-addons-for-gutenberg"),help:(0,u.__)("Choose how screen readers announce countdown updates: Off (no announcement), Polite (announces calmly), or Assertive (announces immediately).","ultimate-addons-for-gutenberg"),value:x||"off",onChange:e=>a({ariaLiveType:e}),children:[(0,_.jsx)(s.__experimentalToggleGroupControlOption,{label:(0,u.__)("Off","ultimate-addons-for-gutenberg"),value:"off"}),(0,_.jsx)(s.__experimentalToggleGroupControlOption,{label:(0,u.__)("Polite","ultimate-addons-for-gutenberg"),value:"polite"}),(0,_.jsx)(s.__experimentalToggleGroupControlOption,{label:(0,u.__)("Assertive","ultimate-addons-for-gutenberg"),value:"assertive"})]})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>"visible"!==v,label:(0,u.__)("Overflow","ultimate-addons-for-gutenberg"),onDeselect:()=>a({overflow:"visible"}),isShownByDefault:!0,panelId:o,children:(0,_.jsxs)(s.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,u.__)("Overflow","ultimate-addons-for-gutenberg"),help:(0,u.__)("Decide how extra content is shown: Visible (shows all), Hidden (cuts off), or Auto (adds scrollbars when needed).","ultimate-addons-for-gutenberg"),value:v||"visible",onChange:e=>a({overflow:e}),isBlock:!0,children:[(0,_.jsx)(s.__experimentalToggleGroupControlOption,{value:"visible",label:"Visible"}),(0,_.jsx)(s.__experimentalToggleGroupControlOption,{value:"hidden",label:"Hidden"}),(0,_.jsx)(s.__experimentalToggleGroupControlOption,{value:"auto",label:"Auto"})]})})]})})})),f=(0,t.memo)((e=>{const{clientId:t,setAttributes:o,attributes:{showLabels:a,daysLabel:n,dayLabel:r,hoursLabel:i,hourLabel:d,minutesLabel:c,minuteLabel:g,secondsLabel:b,secondLabel:h}}=e;return(0,_.jsx)(l.InspectorControls,{group:"settings",children:(0,_.jsxs)(s.__experimentalToolsPanel,{label:(0,u.__)("Labels","ultimate-addons-for-gutenberg"),resetAll:()=>{o({showLabels:!0,daysLabel:(0,u.__)("Days","ultimate-addons-for-gutenberg"),dayLabel:(0,u.__)("Day","ultimate-addons-for-gutenberg"),hoursLabel:(0,u.__)("Hours","ultimate-addons-for-gutenberg"),hourLabel:(0,u.__)("Hour","ultimate-addons-for-gutenberg"),minutesLabel:(0,u.__)("Minutes","ultimate-addons-for-gutenberg"),minuteLabel:(0,u.__)("Minute","ultimate-addons-for-gutenberg"),secondsLabel:(0,u.__)("Seconds","ultimate-addons-for-gutenberg"),secondLabel:(0,u.__)("Second","ultimate-addons-for-gutenberg")})},panelId:t,children:[(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!a,label:(0,u.__)("Show Labels","ultimate-addons-for-gutenberg"),onDeselect:()=>o({showLabels:!0}),isShownByDefault:!0,panelId:t,children:(0,_.jsx)(s.ToggleControl,{label:(0,u.__)("Show Labels","ultimate-addons-for-gutenberg"),checked:a,onChange:e=>o({showLabels:e})})}),a&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>n!==(0,u.__)("Days","ultimate-addons-for-gutenberg"),label:(0,u.__)("Days Label (Plural)","ultimate-addons-for-gutenberg"),onDeselect:()=>o({daysLabel:(0,u.__)("Days","ultimate-addons-for-gutenberg")}),isShownByDefault:!0,panelId:t,children:(0,_.jsx)(s.TextControl,{label:(0,u.__)("Days Label (Plural)","ultimate-addons-for-gutenberg"),value:n||(0,u.__)("Days","ultimate-addons-for-gutenberg"),onChange:e=>o({daysLabel:e})})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>r!==(0,u.__)("Day","ultimate-addons-for-gutenberg"),label:(0,u.__)("Day Label (Singular)","ultimate-addons-for-gutenberg"),onDeselect:()=>o({dayLabel:(0,u.__)("Day","ultimate-addons-for-gutenberg")}),isShownByDefault:!0,panelId:t,children:(0,_.jsx)(s.TextControl,{label:(0,u.__)("Day Label (Singular)","ultimate-addons-for-gutenberg"),value:r||(0,u.__)("Day","ultimate-addons-for-gutenberg"),onChange:e=>o({dayLabel:e})})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>i!==(0,u.__)("Hours","ultimate-addons-for-gutenberg"),label:(0,u.__)("Hours Label (Plural)","ultimate-addons-for-gutenberg"),onDeselect:()=>o({hoursLabel:(0,u.__)("Hours","ultimate-addons-for-gutenberg")}),isShownByDefault:!0,panelId:t,children:(0,_.jsx)(s.TextControl,{label:(0,u.__)("Hours Label (Plural)","ultimate-addons-for-gutenberg"),value:i||(0,u.__)("Hours","ultimate-addons-for-gutenberg"),onChange:e=>o({hoursLabel:e})})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>d!==(0,u.__)("Hour","ultimate-addons-for-gutenberg"),label:(0,u.__)("Hour Label (Singular)","ultimate-addons-for-gutenberg"),onDeselect:()=>o({hourLabel:(0,u.__)("Hour","ultimate-addons-for-gutenberg")}),isShownByDefault:!0,panelId:t,children:(0,_.jsx)(s.TextControl,{label:(0,u.__)("Hour Label (Singular)","ultimate-addons-for-gutenberg"),value:d||(0,u.__)("Hour","ultimate-addons-for-gutenberg"),onChange:e=>o({hourLabel:e})})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>c!==(0,u.__)("Minutes","ultimate-addons-for-gutenberg"),label:(0,u.__)("Minutes Label (Plural)","ultimate-addons-for-gutenberg"),onDeselect:()=>o({minutesLabel:(0,u.__)("Minutes","ultimate-addons-for-gutenberg")}),isShownByDefault:!0,panelId:t,children:(0,_.jsx)(s.TextControl,{label:(0,u.__)("Minutes Label (Plural)","ultimate-addons-for-gutenberg"),value:c||(0,u.__)("Minutes","ultimate-addons-for-gutenberg"),onChange:e=>o({minutesLabel:e})})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>g!==(0,u.__)("Minute","ultimate-addons-for-gutenberg"),label:(0,u.__)("Minute Label (Singular)","ultimate-addons-for-gutenberg"),onDeselect:()=>o({minuteLabel:(0,u.__)("Minute","ultimate-addons-for-gutenberg")}),isShownByDefault:!0,panelId:t,children:(0,_.jsx)(s.TextControl,{label:(0,u.__)("Minute Label (Singular)","ultimate-addons-for-gutenberg"),value:g||(0,u.__)("Minute","ultimate-addons-for-gutenberg"),onChange:e=>o({minuteLabel:e})})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>b!==(0,u.__)("Seconds","ultimate-addons-for-gutenberg"),label:(0,u.__)("Seconds Label (Plural)","ultimate-addons-for-gutenberg"),onDeselect:()=>o({secondsLabel:(0,u.__)("Seconds","ultimate-addons-for-gutenberg")}),isShownByDefault:!0,panelId:t,children:(0,_.jsx)(s.TextControl,{label:(0,u.__)("Seconds Label (Plural)","ultimate-addons-for-gutenberg"),value:b||(0,u.__)("Seconds","ultimate-addons-for-gutenberg"),onChange:e=>o({secondsLabel:e})})}),(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>h!==(0,u.__)("Second","ultimate-addons-for-gutenberg"),label:(0,u.__)("Second Label (Singular)","ultimate-addons-for-gutenberg"),onDeselect:()=>o({secondLabel:(0,u.__)("Second","ultimate-addons-for-gutenberg")}),isShownByDefault:!0,panelId:t,children:(0,_.jsx)(s.TextControl,{label:(0,u.__)("Second Label (Singular)","ultimate-addons-for-gutenberg"),value:h||(0,u.__)("Second","ultimate-addons-for-gutenberg"),onChange:e=>o({secondLabel:e})})})]})]})})})),x=(0,t.memo)((e=>{const{clientId:t,setAttributes:o,attributes:{showSeparator:a,separatorType:n}}=e;return(0,_.jsx)(l.InspectorControls,{group:"settings",children:(0,_.jsxs)(s.__experimentalToolsPanel,{label:(0,u.__)("Separator","ultimate-addons-for-gutenberg"),resetAll:()=>{o({showSeparator:!0,separatorType:":"})},panelId:t,children:[(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!a,label:(0,u.__)("Show Separator","ultimate-addons-for-gutenberg"),onDeselect:()=>o({showSeparator:!0}),isShownByDefault:!0,panelId:t,children:(0,_.jsx)(s.ToggleControl,{label:(0,u.__)("Show Separator","ultimate-addons-for-gutenberg"),checked:a,onChange:e=>o({showSeparator:e})})}),a&&(0,_.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>":"!==n,label:(0,u.__)("Separator Type","ultimate-addons-for-gutenberg"),onDeselect:()=>o({separatorType:":"}),isShownByDefault:!0,panelId:t,children:(0,_.jsxs)(s.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isBlock:!0,label:(0,u.__)("Separator Type","ultimate-addons-for-gutenberg"),value:n||":",onChange:e=>o({separatorType:e}),children:[(0,_.jsx)(s.__experimentalToggleGroupControlOption,{label:(0,u.__)("Colon (:)","ultimate-addons-for-gutenberg"),value:":"}),(0,_.jsx)(s.__experimentalToggleGroupControlOption,{label:(0,u.__)("Line (|)","ultimate-addons-for-gutenberg"),value:"|"}),(0,_.jsx)(s.__experimentalToggleGroupControlOption,{label:(0,u.__)("Slash (/)","ultimate-addons-for-gutenberg"),value:"/"})]})})]})})})),v=(0,t.memo)((e=>{const{clientId:t,setAttributes:o,attributes:{maxWidth:a,maxHeight:n,minWidth:r,minHeight:i,width:d,height:c,align:g}}=e,[b]=(0,l.useSettings)("spacing.units"),h=(0,s.__experimentalUseCustomUnits)({availableUnits:b||["px","%","vw","em","rem"]});return(0,_.jsx)(l.InspectorControls,{group:"dimensions",children:void 0===g?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(s.__experimentalToolsPanelItem,{hasValue:()=>!!(d||c&&"auto"!==c||r||i||a||n),label:(0,u.__)("Sizes","ultimate-addons-for-gutenberg"),as:s.__experimentalGrid,panelId:t,isShownByDefault:!0,onDeselect:()=>o({width:void 0,height:"auto",minWidth:void 0,minHeight:void 0,maxWidth:void 0,maxHeight:void 0}),resetAllFilter:()=>({width:void 0,height:"auto",minWidth:void 0,minHeight:void 0,maxWidth:void 0,maxHeight:void 0}),children:[(0,_.jsx)(s.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:"Width",value:d,onChange:e=>o({width:e}),units:h}),(0,_.jsx)(s.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:"Height",value:c,onChange:e=>o({height:e}),units:h}),(0,_.jsx)(s.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:"Min W",value:r,onChange:e=>o({minWidth:e}),units:h}),(0,_.jsx)(s.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:"Min H",value:i,onChange:e=>o({minHeight:e}),units:h}),(0,_.jsx)(s.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:"Max W",value:a,onChange:e=>o({maxWidth:e}),units:h}),(0,_.jsx)(s.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:"Max H",value:n,onChange:e=>o({maxHeight:e}),units:h})]})}):(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(s.__experimentalToolsPanelItem,{hasValue:()=>!!c&&"auto"!==c||!!i||!!n,label:(0,u.__)("Sizes","ultimate-addons-for-gutenberg"),panelId:t,isShownByDefault:!0,onDeselect:()=>o({height:"auto",minHeight:void 0,maxHeight:void 0}),resetAllFilter:()=>({height:"auto",minHeight:void 0,maxHeight:void 0}),children:[(0,_.jsx)(s.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:"Height",value:c,onChange:e=>o({height:e}),units:h}),(0,_.jsx)(s.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:"Min Height",value:i,onChange:e=>o({minHeight:e}),units:h}),(0,_.jsx)(s.__experimentalUnitControl,{__next40pxDefaultSize:!0,label:"Max Height",value:n,onChange:e=>o({maxHeight:e}),units:h})]})})})})),w=(0,t.memo)((e=>{const{clientId:t,setAttributes:o,attributes:{textColorHover:a,backgroundColorHover:n,backgroundGradientHover:l}}=e;return(0,_.jsx)(m,{settings:[{colorValue:a,label:(0,u.__)("Text Hover","ultimate-addons-for-gutenberg"),onColorChange:e=>o({textColorHover:e}),resetAllFilter:()=>o({textColorHover:void 0})},{colorValue:n,gradientValue:l,label:(0,u.__)("Background Hover","ultimate-addons-for-gutenberg"),onColorChange:e=>o({backgroundColorHover:e}),onGradientChange:e=>o({backgroundGradientHover:e}),resetAllFilter:()=>o({backgroundColorHover:void 0,backgroundGradientHover:void 0})}],panelId:t})})),y=(0,t.memo)((e=>{const t=(0,i.applyFilters)("spectra.countdown.expiry-settings",null,e);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p,{...e}),(0,_.jsx)(x,{...e}),t,(0,_.jsx)(f,{...e}),(0,_.jsx)(w,{...e}),(0,_.jsx)(v,{...e})]})})),S=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),C=new WeakMap,D=[["spectra/countdown-child-day",{lock:{move:!0,remove:!0},style:{spacing:{blockGap:"var:preset|spacing|10"}}}],["spectra/countdown-child-separator",{lock:{move:!0,remove:!0},style:{typography:{textAlign:"center"}}}],["spectra/countdown-child-hour",{lock:{move:!0,remove:!0},style:{spacing:{blockGap:"var:preset|spacing|10"}}}],["spectra/countdown-child-separator",{lock:{move:!0,remove:!0},style:{typography:{textAlign:"center"}}}],["spectra/countdown-child-minute",{lock:{move:!0,remove:!0},style:{spacing:{blockGap:"var:preset|spacing|10"}}}],["spectra/countdown-child-separator",{lock:{move:!0,remove:!0},style:{typography:{textAlign:"center"}}}],["spectra/countdown-child-second",{lock:{move:!0,remove:!0},style:{spacing:{blockGap:"var:preset|spacing|10"}}}]],L=new class{constructor(){this.subscribers=new Map,this.intervalId=null,this.intervalDuration=1e3}subscribe(e,t,o={}){const a=this.subscribers.get(e);return a&&a.callback===t&&JSON.stringify(a.config)===JSON.stringify(o)||(this.subscribers.set(e,{callback:t,config:o}),this.updateIntervalDuration(),1===this.subscribers.size&&this.start()),()=>this.unsubscribe(e)}unsubscribe(e){this.subscribers.delete(e),0===this.subscribers.size?this.stop():this.updateIntervalDuration()}updateIntervalDuration(){let e=864e5;for(const[,{config:a}]of this.subscribers){const n=(a.showDays,t=a.showHours,o=a.showMinutes,a.showSeconds?1e3:o?6e4:t?36e5:864e5);n<e&&(e=n)}var t,o;e=Math.min(e,1e3),e!==this.intervalDuration&&this.intervalId?(this.intervalDuration=e,this.stop(),this.start()):this.intervalDuration=e}start(){this.intervalId||(this.tick(),this.intervalId=setInterval((()=>this.tick()),this.intervalDuration))}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}tick(){0!==this.subscribers.size&&requestAnimationFrame((()=>{const e=[];for(const[,{callback:t}]of this.subscribers)e.push(t);for(let t=0;t<e.length;t++)try{e[t]()}catch(e){}}))}},j=(0,t.memo)((e=>{var o,a;const{attributes:n,setAttributes:s}=e,{timezone:d}=(0,r.getSettings)(),{timerType:c="date",endDateTime:b,showDays:m=!0,showHours:p=!0,showMinutes:f=!0,showSeconds:x=!0,ariaLiveType:v="off",showLabels:w=!0,daysLabel:y,dayLabel:j,hoursLabel:k,hourLabel:T,minutesLabel:H,minuteLabel:I,secondsLabel:M,secondLabel:P,showSeparator:B=!0,separatorType:O=":",editorInnerBlocksPreview:G=!1,layout:A={},style:V={},width:z,height:N,minWidth:E,minHeight:F,maxWidth:U,maxHeight:W,overflow:$}=n,R=y||(0,u.__)("Days","ultimate-addons-for-gutenberg"),J=j||(0,u.__)("Day","ultimate-addons-for-gutenberg"),Z=k||(0,u.__)("Hours","ultimate-addons-for-gutenberg"),q=T||(0,u.__)("Hour","ultimate-addons-for-gutenberg"),X=H||(0,u.__)("Minutes","ultimate-addons-for-gutenberg"),Y=I||(0,u.__)("Minute","ultimate-addons-for-gutenberg"),K=M||(0,u.__)("Seconds","ultimate-addons-for-gutenberg"),Q=P||(0,u.__)("Second","ultimate-addons-for-gutenberg"),ee=null!==(o=A?.type)&&void 0!==o?o:"flex",te=null!==(a=V?.spacing?.blockGap)&&void 0!==a?a:null;(0,t.useEffect)((()=>{if(b)return;const e=new Date,t=new Date;e.setMilliseconds(e.getMilliseconds()+6048e5),t.setMilliseconds(t.getMilliseconds()+6048e5),t.setMilliseconds(t.getMilliseconds()+60*t.getTimezoneOffset()*1e3+60*d.offset*60*1e3),s({endDateTime:e.toISOString(),displayEndDateTime:g(t)})}),[]);const oe={timerType:c,endDateTime:b,showDays:m,showHours:p,showMinutes:f,showSeconds:x},ae=(0,i.applyFilters)("spectra.countdown.calculateTime.dependencies",oe,n),ne=Object.values(ae),le=(0,t.useCallback)((()=>{const e=h(b,m,p,f,x);return(0,i.applyFilters)("spectra.countdown.calculateTime",e,n,h)}),ne),[se,re]=(0,t.useState)(le),ie=(0,t.useRef)(null);ie.current||(ie.current=`countdown-${Math.random().toString(36).substr(2,9)}`);const ue=(0,t.useCallback)((()=>{re((e=>{const t=le();return a=t,(o=e).days===a.days&&o.hours===a.hours&&o.minutes===a.minutes&&o.seconds===a.seconds&&o.isExpired===a.isExpired?e:t;var o,a}))}),[le]);(0,t.useEffect)((()=>{if(b)return L.subscribe(ie.current,ue,{showDays:m,showHours:p,showMinutes:f,showSeconds:x})}),[b,ue,m,p,f,x]);const de=(0,t.useMemo)((()=>({showDays:m,showHours:p,showMinutes:f,showSeconds:x,showLabels:w,daysLabel:R,dayLabel:J,hoursLabel:Z,hourLabel:q,minutesLabel:X,minuteLabel:Y,secondsLabel:K,secondLabel:Q,showSeparator:B,separatorType:O,ariaLiveType:v,editorInnerBlocksPreview:G})),[m,p,f,x,w,R,J,Z,q,X,Y,K,Q,B,O,v,G]),ce=(0,t.useMemo)((()=>({countdown:{...de,days:se.days,hours:se.hours,minutes:se.minutes,seconds:se.seconds,isExpired:se.isExpired,daysLabel:1===se.days&&de.dayLabel?de.dayLabel:de.daysLabel,hoursLabel:1===se.hours&&de.hourLabel?de.hourLabel:de.hoursLabel,minutesLabel:1===se.minutes&&de.minuteLabel?de.minuteLabel:de.minutesLabel,secondsLabel:1===se.seconds&&de.secondLabel?de.secondLabel:de.secondsLabel}})),[se,de]),ge=[];"default"!==ee&&"constrained"!==ee||null!==te||ge.push("countdown-is-layout-flow-constrained");const{style:be,classNames:he}=((e,o,a=[])=>{const n=(0,t.useMemo)((()=>(e=>{if(C.has(e))return C.get(e);const t=Object.freeze(e.map((e=>Object.freeze({...e}))));return C.set(e,t),t})(o)),[o]),l=(0,t.useMemo)((()=>a),[a.join(",")]);return((e,o=[],a=[],n={})=>(0,t.useMemo)((()=>{const t=[...a],l={...n};return o.forEach((o=>{const{key:a,cssVar:n,className:s,value:r}=o;if(null===n&&null===s)return;const i=`--spectra-${S(a)}`,u=`spectra-${S(a)}`,d=void 0!==n?n:i,c=void 0!==s?s:u,g=e[a]||"",b=void 0!==r?r:g;b&&null!==d&&(l[d]=b),b&&null!==c&&t.push(c)})),{style:l,classNames:t}}),[e,o,a,n]))((0,t.useMemo)((()=>{const{textColor:t,textColorHover:o,backgroundColor:a,backgroundColorHover:l,backgroundGradient:s,backgroundGradientHover:r,typography:i,style:u,className:d,...c}=e;return{textColor:t,textColorHover:o,backgroundColor:a,backgroundColorHover:l,backgroundGradient:s,backgroundGradientHover:r,typography:i,style:u,className:d,...Object.keys(c).reduce(((e,t)=>(n.some((e=>e.key===t))&&(e[t]=c[t]),e)),{})}}),[e.textColor,e.textColorHover,e.backgroundColor,e.backgroundColorHover,e.backgroundGradient,e.backgroundGradientHover,e.typography,e.style,e.className,JSON.stringify(n.map((t=>e[t.key])))]),n,l)})(n,[{key:"textColor"},{key:"textColorHover"},{key:"backgroundColor"},{key:"backgroundColorHover"},{key:"backgroundGradient"},{key:"backgroundGradientHover"}],ge),_e=(0,l.useBlockProps)({className:(me=he,me.filter(Boolean).join(" ")),style:{width:z,height:N,minWidth:E,minHeight:F,maxWidth:U,maxHeight:W,position:"relative",overflow:$,...be},"aria-live":"off"!==v?v:void 0,"aria-atomic":"off"!==v?"true":void 0,"aria-label":"off"!==v?(0,u.__)("Countdown timer","ultimate-addons-for-gutenberg"):void 0});var me;const pe=(0,i.applyFilters)("spectra.countdown.template",D),fe=(0,l.useInnerBlocksProps)(_e,{template:pe,renderAppender:!1});return m||p||f||x?(0,_.jsx)(l.BlockContextProvider,{value:ce,children:(0,_.jsx)("div",{...fe})}):(0,_.jsx)("div",{..._e,children:(0,u.__)("Please enable at least one time unit (Days, Hours, Minutes, or Seconds).","ultimate-addons-for-gutenberg")})})),k=e=>{const{blockName:t,childPath:o="",pluginName:a="spectra"}=e;if(!["spectra","spectra-pro"].includes(a)||"spectra"===a&&!window?.uagb_blocks_info?.uagb_url||"spectra-pro"===a&&!window?.spectra_pro_blocks_info?.spectra_pro_url)return null;if(!t)return null;let n="";switch(a){case"spectra":n=`${window.uagb_blocks_info.uagb_url}/spectra-v3`;break;case"spectra-pro":n=`${window.spectra_pro_blocks_info.spectra_pro_url}/spectra-pro-v2`}const l=`${n}/assets/block-previews/${o?o+"/":""}${t}.webp`;return(0,_.jsx)("img",{width:"100%",src:l,alt:""})},T=JSON.parse('{"UU":"spectra/countdown"}');(0,e.registerBlockType)(T.UU,{icon:n(),edit:e=>{const{isSelected:t,attributes:{isPreview:o}}=e;return o?(0,_.jsx)(k,{blockName:"countdown"}):(0,_.jsxs)(_.Fragment,{children:[t&&(0,_.jsx)(y,{...e}),(0,_.jsx)(j,{...e})]})},save:()=>(0,_.jsx)(l.InnerBlocks.Content,{})})}},o={};function a(e){var n=o[e];if(void 0!==n)return n.exports;var l=o[e]={exports:{}};return t[e](l,l.exports,a),l.exports}a.m=t,e=[],a.O=(t,o,n,l)=>{if(!o){var s=1/0;for(d=0;d<e.length;d++){for(var[o,n,l]=e[d],r=!0,i=0;i<o.length;i++)(!1&l||s>=l)&&Object.keys(a.O).every((e=>a.O[e](o[i])))?o.splice(i--,1):(r=!1,l<s&&(s=l));if(r){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[o,n,l]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={6076:0,7124:0};a.O.j=t=>0===e[t];var t=(t,o)=>{var n,l,[s,r,i]=o,u=0;if(s.some((t=>0!==e[t]))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(i)var d=i(a)}for(t&&t(o);u<s.length;u++)l=s[u],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(d)},o=globalThis.webpackChunkspectra_v3=globalThis.webpackChunkspectra_v3||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=a.O(void 0,[7124],(()=>a(4890)));n=a.O(n)})();